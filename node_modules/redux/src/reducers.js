import {createStore,combineReducers} from 'redux';
const state={
    users:[
        {
            id:1,
            name:'raj'
        },

        {
            id:2,
            name:'rajashree'
        },
        {
            id:1,
            name:'ramyashree'
        },

        
    ],
    todos:[
        {
            userId:1,
            todoId:1,
            name:'complete deployment'
        },
        {
            userId:1,
            todoId:2,
            name:'finish development'
        },
        {
            userId:3,
            todoId:1,
            name:'sprint start'
        },
        {
            userId:2,
            todoId:1,
            name:'bug fix'
        }

    ]
}

// function reducer(state,action){
    // if(action.type==='EDIT_TODO')
    // {
    //     let todos=state.todos;
    //     let newTodos=todos.map(todo=>{
    //         if(todo.todoId===action.todoId && todo.userId){
    //             todo.name=action.name;
    //         }
    //         return {...state,todos:newTodos};
    //     })
    //     return newTodos;
    // }
    // if(action.type==='ADD_USER')
    // {
    //     let newUser={id:action.userId,name:action.userName}
    //     let users=[...state.users,newUser];
    //     return {...state,users:newUser};
    // }
    // return state;
// }

const ADD_USER='ADD_USER';
const EDIT_TODO='EDIT_TODO'

function userReducer(users=state.users,action) //state,action
{
     if(action.type===ADD_USER)
    {
        let newUser={id:action.userId,name:action.userName}
        let newUsers=[...users,newUser];
        return newUsers;
    }
    return users;
} 

function todoReducer(todos=state.todos,action)
{
       if(action.type===EDIT_TODO)
    {
        let newTodos=todos.map(todo=>{
            if(todo.todoId===action.todoId && todo.userId){
                todo.name=action.name;
            }
            return todo;
        })
        return newTodos;
    }
    return todos;
}

const combineReducer=combineReducers({users:userReducer,todos:todoReducer});
const store=createStore(combineReducer);
console.log(store.getState())
store.dispatch({type:ADD_USER,userId:5,userName:'Rajashree'})

console.log(store.getState())
